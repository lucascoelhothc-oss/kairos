require('dotenv').config(); const { createClient } = require('@supabase/supabase-js'); module.exports = function createSupabaseClient() { const url = process.env.SUPABASE_URL; const key = process.env.SUPABASE_SERVICE_ROLE_KEY; if (url && key) { return createClient(url, key); } return { from: () => ({ insert: async (data) => ({ data: null, error: null }), select: async () => ({ data: [], error: null }), upsert: async () => ({ select: () => ({ single: async () => ({ data: {id:'mock'}, error: null }) }) }) }), auth: { getUser: async () => ({ data: { user: { id: 'mock-id' } } }) } }; };